---
import Layout from '../../layouts/Layout.astro';
import RecipeHero from '../../components/RecipeHero';
import RecipeContent from '../../components/RecipeContent';
import RecipeComments from '../../components/RecipeComments';
import TableOfContents from '../../components/TableOfContents';
import RecipeTimer from '../../components/RecipeTimer';

const recipe = {
  title: "Air Fryer Roast Carrot & Goat's Cheese Salad",
  description: "A beautiful combination of sweet roasted carrots, creamy goat's cheese, and crunchy hazelnuts. Perfect as a light lunch or dinner party starter.",
  image: "/images/recipes/carrot-goats-cheese-salad.jpg",
  cookingTime: "35 minutes",
  timeCategory: "30-60 mins",
  difficulty: "Easy",
  serves: "4",
  category: "Salads",
  slug: "air-fryer-carrot-goats-cheese-salad",
  featured: true,
  rating: 4.7,
  totalRatings: 128,
  ingredients: [
    "600g carrots",
    "2 tablespoons extra virgin olive oil",
    "2 oranges",
    "2 tablespoons runny honey",
    "100g blanched hazelnuts",
    "150g mixed salad leaves",
    "1 bunch of fresh mint (30g)",
    "200g soft goat's cheese",
    "2 tablespoons extra virgin olive oil, for drizzling",
    "Sea salt and black pepper, to taste"
  ],
  method: [
    {
      step: "Preheat air fryer",
      time: 2,
      description: "Preheat your air fryer to 200ºC (400ºF)."
    },
    {
      step: "Prepare carrots",
      time: 5,
      description: "Wash and trim the carrots, then cut any larger ones in half lengthways. Place in a bowl with 2 tablespoons of olive oil and a good pinch of sea salt and black pepper. Toss well to coat."
    },
    {
      step: "Air fry carrots",
      time: 20,
      description: "Place the carrots in the air fryer basket in a single layer (you may need to cook in batches). Cook for 20 minutes, or until tender and golden, shaking halfway through."
    },
    {
      step: "Prepare dressing",
      time: 5,
      description: "Finely grate the zest of 1 orange into a large bowl. Cut both oranges in half and squeeze all the juice into the bowl. Add the honey and whisk together."
    },
    {
      step: "Toast hazelnuts",
      time: 5,
      description: "Toast the hazelnuts in a dry frying pan over a medium heat until golden, then roughly chop."
    },
    {
      step: "Combine and serve",
      time: 5,
      description: "When carrots are done, add to the orange dressing while hot. Toss well and let cool slightly. Pick and chop mint leaves. Arrange salad leaves on a platter, top with dressed carrots, crumble goat's cheese, scatter hazelnuts and mint. Finish with olive oil drizzle and seasoning."
    }
  ],
  tips: [
    "For extra flavor, try using rainbow carrots if you can find them",
    "The salad can be served warm or at room temperature",
    "Make sure to let the carrots cool slightly before adding to the leaves to prevent wilting",
    "You can prepare the carrots in advance and assemble just before serving",
    "Try to get even-sized carrots for consistent cooking",
    "For extra crunch, reserve some of the hazelnuts to add just before serving",
    "If your air fryer is small, cook the carrots in batches to avoid overcrowding"
  ],
  nutritionInfo: {
    calories: "485",
    protein: "15g",
    carbs: "28g",
    fat: "36g"
  },
  dietaryPreferences: ["Vegetarian", "Gluten-Free"],
  season: ["Spring", "Summer", "Autumn"],
  reviews: [],
  prepTime: "10 mins",
  totalTime: "45 mins",
  variations: [
    {
      title: "Vegan Version",
      description: "A dairy-free alternative that's just as delicious",
      changes: [
        "Replace goat's cheese with vegan soft cheese or avocado",
        "Use maple syrup instead of honey",
        "Add some toasted pumpkin seeds for extra protein"
      ]
    },
    {
      title: "Winter Version",
      description: "A warming twist for colder months",
      changes: [
        "Add roasted parsnips alongside the carrots",
        "Use blood oranges when in season",
        "Add some warm spices like cumin and coriander to the carrots before roasting",
        "Serve slightly warm rather than cooled"
      ]
    }
  ]
};

const sections = [
  { id: 'ingredients', title: 'Ingredients' },
  { id: 'method', title: 'Method' },
  { id: 'tips', title: 'Chef\'s Tips' },
  { id: 'variations', title: 'Variations' },
  { id: 'nutrition', title: 'Nutrition' }
];
---

<Layout title={`${recipe.title} | Fresh Food Weekly`}>
  <main class="min-h-screen">
    <nav class="absolute top-4 left-4 z-10 text-sm text-white/90" aria-label="Breadcrumb">
      <ol class="list-none p-0 inline-flex">
        <li class="flex items-center">
          <a href="/" class="hover:text-white transition-colors">Home</a>
          <svg class="fill-current w-3 h-3 mx-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
            <path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/>
          </svg>
        </li>
        <li class="flex items-center">
          <a href="/recipes" class="hover:text-white transition-colors">Recipes</a>
          <svg class="fill-current w-3 h-3 mx-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
            <path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/>
          </svg>
        </li>
        <li>
          <span class="text-white/70" aria-current="page">{recipe.title}</span>
        </li>
      </ol>
    </nav>

    <RecipeHero client:load recipe={recipe} />

    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 lg:grid-cols-4 gap-8 mt-8">
        <aside class="lg:col-span-1">
          <div class="sticky top-8">
            <TableOfContents sections={sections} />
          </div>
        </aside>

        <div class="lg:col-span-3">
          <RecipeContent client:load recipe={recipe}>
            <RecipeTimer client:load steps={recipe.method} slot="timer" />
          </RecipeContent>
          
          <div class="mt-16 mb-12">
            <RecipeComments client:load recipeSlug={recipe.slug} />
          </div>
        </div>
      </div>
    </div>
  </main>
</Layout>

<style>
  html {
    scroll-behavior: smooth;
  }

  @media (min-width: 768px) {
    .hero-image {
      transform: translateZ(0);
      will-change: transform;
    }
  }

  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: #f1f1f1;
  }

  ::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #555;
  }
</style>
